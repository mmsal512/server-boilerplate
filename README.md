# ๐ Server Boilerplate โ Production Stack in One Command

### ุณูุฑุจุช ูุดุฑ ูุงูู ูุจูุฆุฉ ุฅูุชุงุฌ ููุญุตููุฉ

> **Traefik + n8n + Odoo 16 + Evolution API + Next.js + Portainer + Glances**
> **ูุน: CrowdSec + ClamAV + UFW + SSH Hardening + Tailscale VPN**
> ูุชูุงูู ูุน: **Ubuntu 24.04 LTS**

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

- [ูุธุฑุฉ ุนุงูุฉ](#-ูุธุฑุฉ-ุนุงูุฉ)
- [ุงููุนูุงุฑูุฉ](#-ุงููุนูุงุฑูุฉ)
- [ุงููููุฒุงุช](#-ุงููููุฒุงุช)
- [ุงููุชุทูุจุงุช](#-ุงููุชุทูุจุงุช)
- [ุงูุจููุฉ ูุงููููุงุช](#-ุงูุจููุฉ-ูุงููููุงุช)
- [ุงูุชุซุจูุช ูุงูุงุณุชุฎุฏุงู](#-ุงูุชุซุจูุช-ูุงูุงุณุชุฎุฏุงู)
- [ุงููุชุบูุฑุงุช ุงููุงุจูุฉ ููุชุนุฏูู](#-ุงููุชุบูุฑุงุช-ุงููุงุจูุฉ-ููุชุนุฏูู)
- [ุชูุงุตูู ุงูููููุงุช](#-ุชูุงุตูู-ุงูููููุงุช)
- [ููุงุฑุฏ ุงูุญุงููุงุช](#-ููุงุฑุฏ-ุงูุญุงููุงุช)
- [ุงูููุงู ุงููุฌุฏููุฉ](#-ุงูููุงู-ุงููุฌุฏููุฉ-cron-jobs)
- [ูุง ุจุนุฏ ุงูุชุซุจูุช](#-ูุง-ุจุนุฏ-ุงูุชุซุจูุช)
- [ุงุณุชูุดุงู ุงูุฃุฎุทุงุก](#-ุงุณุชูุดุงู-ุงูุฃุฎุทุงุก)
- [ุงูุฃูุงู](#-ููุงุญุธุงุช-ุฃูููุฉ)
- [ุงููุณุงููุฉ](#-ุงููุณุงููุฉ)
- [ุงูุฑุฎุตุฉ](#-ุงูุฑุฎุตุฉ)

---

## ๐ญ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุดุฑูุน ููุญููู ุณูุฑูุฑ Ubuntu ุฎุงู ุฅูู ุจูุฆุฉ ุฅูุชุงุฌ ููุญุตููุฉ ุจุงููุงูู ุจุฃูุฑ ูุงุญุฏ (`sudo bash setup.sh`). ูููู ุจูุดุฑ ุญุฒูุฉ ุชุทุจููุงุช ูุชูุงููุฉ ุฎูู Traefik Reverse Proxy ูุน ุดูุงุฏุงุช SSL ุชููุงุฆูุฉุ ูุญูุงูุฉ ูุชุนุฏุฏุฉ ุงูุทุจูุงุชุ ููุตูู VPN ุขููุ ูุชุญุณููุงุช ูููุธุงู โ ูู ุฐูู ููุฏุงุฑ ูู ุฎูุงู ููู `.env` ูุงุญุฏ.

Copy
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ Server Boilerplate โ โ Production Stack in One Command โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค โ โ โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโ โ โ โ Traefik โ โ Portainer โ โ Glances โ โ โ โ Reverse Proxyโ โ Docker Mgmt โ โ System Monitorโ โ โ โ Auto SSL โ โ UI โ โ Real-time โ โ โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโ โ โ โ โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโ โ โ โ n8n โ โ Odoo 16 โ โ Evolution API โ โ โ โ Automation โ โ ERP + โ โ WhatsApp + โ โ โ โ + Redis โ โ PostgreSQL โ โ PostgreSQL + โ โ โ โโโโโโโโโโโโโโโ โ + Redis โ โ Redis โ โ โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโ โ โ โ โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ โ Next.js โ โ Tailscale VPN โ โ โ โ Frontend โ โ Secure Remote Access โ โ โ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ โ โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ โ UFW + CrowdSec + ClamAV + SSH Hardening โ โ โ โ + Kernel Tuning + Swap + Auto-Upgrades โ โ โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


---

## ๐ ุงููุนูุงุฑูุฉ

              Internet
                 โ
                 โผ
           โโโโโโโโโโโโโ
           โ Cloudflare โ
           โ   (DNS)    โ
           โโโโโโโฌโโโโโโ
                 โ
     โโโโโโโโโโโโโผโโโโโโโโโโโโ
     โ    UFW Firewall       โ  โ Cloudflare-only HTTP/HTTPS
     โ    CrowdSec IDS      โ  โ ุญุธุฑ ุชููุงุฆู ููููุงุฌููู
     โโโโโโโโโโโโโฌโโโโโโโโโโโโ
                 โ
     โโโโโโโโโโโโโผโโโโโโโโโโโโ
     โ      Traefik          โ  โ Auto SSL (Let's Encrypt)
     โ   Reverse Proxy       โ
     โโโโโฌโโโโฌโโโโฌโโโโฌโโโโฌโโโ
         โ   โ   โ   โ   โ
         โผ   โผ   โผ   โผ   โผ
       n8n Odoo Evo Next Portainer  Glances
            โ    โ
            โผ    โผ
       PostgreSQL + Redis (ููู ุฎุฏูุฉ)

     โโโโโโโโโโโโโโโโโโโโโโโโโ
     โ    Tailscale VPN      โ  โ ูุตูู ุขูู ุนู ุจูุนุฏ
     โโโโโโโโโโโโโโโโโโโโโโโโโ

---

## โจ ุงููููุฒุงุช

| ุงููููู | ุงููุตู |
|--------|-------|
| **ููู `.env` ูุงุญุฏ** | ุฌููุน ุงูุฅุนุฏุงุฏุงุช ูู ููุงู ูุงุญุฏ โ ุนุฏูู ูุดุบูู |
| **Traefik** | Reverse Proxy ุชููุงุฆู ูุน ุดูุงุฏุงุช Let's Encrypt SSL ู Trusted IPs ูู Cloudflare |
| **n8n** | ุฃุชูุชุฉ ุณูุฑ ุงูุนูู ูุน Redis Cache ููุถุน ุงูุฅูุชุงุฌ |
| **Odoo 16** | ูุธุงู ERP ูุชูุงูู ูุน PostgreSQL ููุญุณูู ู Redis Cache |
| **Evolution API** | ุชูุงูู ูุงุชุณุงุจ ูุน PostgreSQL ู Redis ูุณุชูููู |
| **Next.js** | ุชุทุจูู ูุงุฌูุฉ ุฃูุงููุฉ ูุน Redis Cache ูุดุชุฑู ูุน Odoo |
| **Portainer** | ุฅุฏุงุฑุฉ Docker ุนุจุฑ ูุงุฌูุฉ ููุจ |
| **Glances** | ูุฑุงูุจุฉ ููุงุฑุฏ ุงููุธุงู ุจุงูููุช ุงููุนูู |
| **Tailscale VPN** | ุดุจูุฉ VPN ุจุฏูู ุฅุนุฏุงุฏ ูููุตูู ุงูุขูู ุนู ุจูุนุฏ |
| **Cloudflare Tunnel** | ููู Cloudflare ุขูู (ุงุฎุชูุงุฑู) |
| **UFW** | ุฌุฏุงุฑ ุญูุงูุฉ ููููุฏ ุจุนูุงููู Cloudflare ููุท ูู HTTP/HTTPS |
| **CrowdSec** | ูุธุงู ูุดู ูููุน ุงุฎุชุฑุงู ุชุดุงุฑูู ูุน ุญุธุฑ ุชููุงุฆู 24 ุณุงุนุฉ |
| **ClamAV** | ูุญุต ูููู ุฐูู ููุจุฑูุฌูุงุช ุงูุฎุจูุซุฉ ูุน ุญุฌุฑ ุชููุงุฆู |
| **SSH Hardening** | ูููุฐ ูุฎุตุต + ููุชุงุญ ููุท + ุชุนุทูู Root + ูุณุชุฎุฏู ูุงุญุฏ |
| **Kernel Tuning** | ุชุญุณููุงุช Sysctl ููุดุจูุฉ ูุงูุฃูุงู ูุงูุฃุฏุงุก |
| **Swap 4GB** | ููู Swap ูุน Swappiness ููุญุณูู |
| **Auto-Upgrades** | ุชุญุฏูุซุงุช ุฃูููุฉ ุชููุงุฆูุฉ |
| **Resource Limits** | ุญุฏูุฏ CPU ูุฐุงูุฑุฉ ููู ุญุงููุฉ |
| **ูุธุงู ูุฑุงูุจุฉ** | ุชูุจููุงุช ูู ุฏูููุชูู ูู CPU/RAM/Disk |

---

## ๐ฆ ุงููุชุทูุจุงุช

| ุงูููุฑุฏ | ุงูุญุฏ ุงูุฃุฏูู |
|--------|------------|
| **ูุธุงู ุงูุชุดุบูู** | Ubuntu 24.04 LTS |
| **ุงููุนุงูุฌ** | 2 vCPUs |
| **ุงูุฐุงูุฑุฉ** | 8 GB RAM |
| **ุงููุฑุต** | 100 GB SSD |
| **ุงูุดุจูุฉ** | ุนููุงู IP ุนุงู + ุฏูููู ูุน DNS ููุนุฏู |

### ุฎุฏูุงุช ูุทููุจุฉ ูุณุจูุงู

โ ุฏูููู ูููุฌูู ุฅูู IP ุงูุณูุฑูุฑ (ุนุจุฑ Cloudflare ุฃู ุบูุฑู) โ ููุชุงุญ Tailscale Auth Key ูู: https://login.tailscale.com/admin/settings/keys โ ููุชุงุญ SSH ุนุงู ููุถุงู ูููุณุชุฎุฏู ุนูู ุงูุณูุฑูุฑ


---

## ๐ ุงูุจููุฉ ูุงููููุงุช

server-boilerplate/ โ โโโ .env.example # ูุงูุจ ุงูุฅุนุฏุงุฏุงุช ุงูุฑุฆูุณู (ุงูุณุฎู ุฅูู .env) โโโ setup.sh # ุณูุฑุจุช ุงููุดุฑ ุงูุฑุฆูุณู โ โโโ my-stack/ โ โโโ docker-compose.yml # ุฌููุน ุฎุฏูุงุช ุงูุชุทุจููุงุช โ โโโ odoo-config/ โ โ โโโ odoo.conf # ุฅุนุฏุงุฏุงุช Odoo ERP โ โโโ postgres-config/ โ โโโ postgresql.conf # ุชุญุณููุงุช PostgreSQL โ โโโ tailscale-stack/ โ โโโ docker-compose.yml # ุฎุฏูุฉ Tailscale VPN โ โโโ security/ โ โโโ setup-ufw.sh # ููุงุนุฏ ุฌุฏุงุฑ ุงูุญูุงูุฉ (ุนูุงููู Cloudflare) โ โโโ setup-ssh.sh # ุชูููุฉ SSH โ โโโ setup-crowdsec.sh # ุชุซุจูุช ูุธุงู ูุดู ุงูุงุฎุชุฑุงู โ โโโ setup-clamav.sh # ุชุซุจูุช ูุถุงุฏ ุงูููุฑูุณุงุช โ โโโ crowdsec/ โ โโโ acquis.yaml # ูุตุงุฏุฑ ุงูุณุฌูุงุช ุงูููุฑุงูุจุฉ โ โโโ profiles.yaml # ูููุงุช ุชุนุฑูู ุงูุญุธุฑ โ โโโ system/ โ โโโ setup-swap.sh # ุฅูุดุงุก Swap 4GB โ โโโ setup-sysctl.sh # ุชุญุณููุงุช Kernel โ โโโ setup-auto-upgrades.sh # ุงูุชุญุฏูุซุงุช ุงูุฃูููุฉ ุงูุชููุงุฆูุฉ โ โโโ scripts/ โ โโโ monitor_resources.sh # ูุฑุงูุจุฉ CPU/RAM/Disk โ โโโ setup-cron.sh # ุชุซุจูุช ุงูููุงู ุงููุฌุฏููุฉ โ โโโ docs/ โโโ VARIABLES.md # ูุฑุฌุน ูุงูู ูููุชุบูุฑุงุช


---

## ๐ ุงูุชุซุจูุช ูุงูุงุณุชุฎุฏุงู

### 1. ุงุณุชูุณุงุฎ ุงููุดุฑูุน

```bash
git clone https://github.com/mmsal512/server-boilerplate.git
cd server-boilerplate
```
### 2. ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ
```ini
cp .env.example .env
nano .env
```
### 3. ุชูููุฏ ูููุงุช ูุฑูุฑ ูููุฉ
ูููุงุชูุญ API
```ini
openssl rand -hex 32
```
ููููุงุช ูุฑูุฑ ููุงุนุฏ ุงูุจูุงูุงุช
```ini
openssl rand -base64 24
```
### 4. ุชุดุบูู ุงููุดุฑ
```ini
sudo bash setup.sh
```
ูุงุฐุง ููุนู ุงูุณูุฑุจุช ุชููุงุฆูุงูุ
ุชุฑุชูุจ ุงูุชูููุฐ ูุตูู ุจุนูุงูุฉ ุนุจุฑ 6 ูุฑุงุญู:

 ุงููุฑุญูุฉ 1 โ ุงููุธุงู
 โโโ 1. โ ุชุญุฏูุซ ุงููุธุงู ูุชุซุจูุช ุงูุฃุฏูุงุช ุงูุฃุณุงุณูุฉ
 โโโ 2. ๐พ ุฅุนุฏุงุฏ Swap (4GB)
 โโโ 3. โก ุชุญุณููุงุช Kernel (sysctl)
 โโโ 4. ๐ ุงูุชุญุฏูุซุงุช ุงูุฃูููุฉ ุงูุชููุงุฆูุฉ

 ุงููุฑุญูุฉ 2 โ Docker
 โโโ 5. ๐ณ ุชุซุจูุช Docker + ุฅูุดุงุก ุดุจูุฉ web-public

 ุงููุฑุญูุฉ 3 โ ุงูุฃูุงู
 โโโ 6. ๐ ุชูููุฉ SSH (ูููุฐ ูุฎุตุต + ููุชุงุญ ููุท)
 โโโ 7. ๐งฑ ุชูุนูู UFW (Cloudflare ููุท)
 โโโ 8. ๐ค ุชุซุจูุช CrowdSec + Firewall Bouncer
 โโโ 9. ๐ฆ ุชุซุจูุช ClamAV + ุณูุฑุจุช ุงููุญุต ุงูุฐูู

 ุงููุฑุญูุฉ 4 โ ูููุงุช ุงูุฅุนุฏุงุฏ
 โโโ 10. ๐ ุชูููุฏ .env ู .env.evolution ู odoo.conf ู tailscale .env

 ุงููุฑุญูุฉ 5 โ ุงููุดุฑ
 โโโ 11. ๐ ูุดุฑ my-stack (ูู ุงูุชุทุจููุงุช)
 โโโ 12. ๐ ูุดุฑ tailscale-stack

 ุงููุฑุญูุฉ 6 โ ุงูุฅููุงุก
 โโโ 13. โฐ ุชุซุจูุช ุงูููุงู ุงููุฌุฏููุฉ (Cron)
 โโโ 14. โ๏ธ ุชูุนูู Cloudflare Tunnel (ุงุฎุชูุงุฑู)
## โ๏ธ ุงููุชุบูุฑุงุช ุงููุงุจูุฉ ููุชุนุฏูู

ุงููุชุบูุฑุงุช ุงููุทููุจุฉ
ุงููุชุบูุฑ	ุงููุตู	ูุซุงู
DOMAIN_NAME	ุงูุฏูููู ุงูุฑุฆูุณู	example.com
SSL_EMAIL	ุจุฑูุฏ ุดูุงุฏุงุช SSL	admin@example.com
GENERIC_TIMEZONE	ุงูููุทูุฉ ุงูุฒูููุฉ	Asia/Riyadh
SSH_PORT	ูููุฐ SSH (ุชุฌููุจ 22)	2026
SSH_USERNAME	ูุณุชุฎุฏู SSH ุบูุฑ root	mohammed
EVOLUTION_DB_PASSWORD	ูููุฉ ูุฑูุฑ PostgreSQL ูู Evolution	ุนุดูุงุฆูุฉ
ODOO_DB_PASSWORD	ูููุฉ ูุฑูุฑ PostgreSQL ูู Odoo	ุนุดูุงุฆูุฉ
ODOO_ADMIN_PASSWORD	ูููุฉ ูุฑูุฑ ุงููุณุคูู ูู Odoo	ุนุดูุงุฆูุฉ
EVOLUTION_API_KEY	ููุชุงุญ ูุตุงุฏูุฉ Evolution API	openssl rand -hex 32
TS_AUTHKEY	ููุชุงุญ ูุตุงุฏูุฉ Tailscale	ูู ููุญุฉ ุงูุชุญูู
ุงููุชุบูุฑุงุช ุงูุงุฎุชูุงุฑูุฉ
ุงููุชุบูุฑ	ุงูุงูุชุฑุงุถู	ุงููุตู
EVOLUTION_REDIS_PREFIX_KEY	evolution_v2	ุจุงุฏุฆุฉ Redis Cache
TS_HOSTNAME	server-tailscale	ุงุณู ุงูุฌูุงุฒ ูู Tailscale
N8N_EXECUTIONS_PROCESS	main	ูุถุน ุชูููุฐ n8n
N8N_PUSH_BACKEND	websocketa	ุทุฑููุฉ ุงูุงุชุตุงู ุงูููุฑู ูู n8n
CLOUDFLARE_TUNNEL_TOKEN	(ูุงุฑุบ)	ุฑูุฒ ููู Cloudflare โ ุงุชุฑูู ูุงุฑุบุงู ููุชุฎุทู
NEXTJS_IMAGE	mohammed512/odoo-nextjs-frontend:latest	ุตูุฑุฉ Docker ูููุงุฌูุฉ ุงูุฃูุงููุฉ
ุงููุฑุฌุน ุงููุงูู: 
docs/VARIABLES.md

๐ ุชูุงุตูู ุงูููููุงุช
ุงูุชุทุจููุงุช ูุงููุทุงูุงุช ุงููุฑุนูุฉ
ุงูุฎุฏูุฉ	ุงููุตู	ุงููุทุงู ุงููุฑุนู
n8n	ุฃุชูุชุฉ ุณูุฑ ุงูุนูู	domain.com
Odoo 16	ูุธุงู ERP + PostgreSQL	odoo.domain.com
Evolution API	ุชูุงูู ูุงุชุณุงุจ + PostgreSQL + Redis	evo.domain.com
Next.js	ุชุทุจูู ูุงุฌูุฉ ุฃูุงููุฉ	next.domain.com
Portainer	ุฅุฏุงุฑุฉ Docker ุนุจุฑ ูุงุฌูุฉ ููุจ	portainer.domain.com
Glances	ูุฑุงูุจุฉ ุงููุธุงู ุจุงูููุช ุงููุนูู	monitor.domain.com
Traefik โ Reverse Proxy
ูุนูู Traefik ูุจูุงุจุฉ ุฑุฆูุณูุฉ ูุฌููุน ุงูุฎุฏูุงุช. ูุชููู ุชููุงุฆูุงู ุฅุตุฏุงุฑ ูุชุฌุฏูุฏ ุดูุงุฏุงุช SSL ุนุจุฑ Let's Encrypt (TLS Challenge)ุ ูุน ุฅุนุงุฏุฉ ุชูุฌูู HTTP ุฅูู HTTPS ุจุดูู ุฅุฌุจุงุฑู. ุชู ุฅุนุฏุงุฏ Trusted IPs ูุนูุงููู Cloudflare IPv4 ูุถูุงู ุชูุฑูุฑ ุนูุงููู ุงูุฒูุงุฑ ุงูุญููููุฉ ุนุจุฑ ุฑุคูุณ X-Forwarded-For. ุฌููุน ุงูุฎุฏูุงุช ุชููุดู ุนุจุฑ Labels ูู Docker Compose ุจุฏูู ุงูุญุงุฌุฉ ูููู ุฅุนุฏุงุฏ ุฎุงุฑุฌู.

ุฌุฏุงุฑ ุงูุญูุงูุฉ UFW
ูุชู ุชูููุฏ ุญุฑูุฉ HTTP/HTTPS ูุนูุงููู Cloudflare IP ููุทุ ููุง ูููุน ุงููุตูู ุงููุจุงุดุฑ ููุณูุฑูุฑ. ููุณูุญ ุจู SSH ุนูู ุงููููุฐ ุงููุฎุตุต ูู ุฃู ูุตุฏุฑ. ุงูุณูุงุณุฉ ุงูุงูุชุฑุงุถูุฉ: ุญุธุฑ ุงููุงุฑุฏ + ุณูุงุญ ุงูุตุงุฏุฑ.

Incoming:  DENY (default)
           โ Allow: SSH (ูููุฐ ูุฎุตุต) ูู ุฃู ูุตุฏุฑ
           โ Allow: HTTP/HTTPS ูู ุนูุงููู Cloudflare IPv4 + IPv6 ููุท
Outgoing:  ALLOW (default)
CrowdSec โ ูุดู ูููุน ุงูุงุฎุชุฑุงู
ูุธุงู ุญูุงูุฉ ุชุดุงุฑูู ููุฑุงูุจ ุณุฌูุงุช ุงููุธุงู ูุญุงููุงุช Docker. ูุชู ุชุซุจูุช ุงููุฌููุนุงุช ุงูุชุงููุฉ ุชููุงุฆูุงู: crowdsecurity/linux, crowdsecurity/traefik, crowdsecurity/http-cve, crowdsecurity/whitelist-good-actors, crowdsecurity/pgsql. ุงููุตุงุฏุฑ ุงูููุฑุงูุจุฉ ุชุดูู: ุณุฌูุงุช ุงููุตุงุฏูุฉ (/var/log/auth.log), ุณุฌูุงุช ุงููุธุงู (/var/log/syslog), ุณุฌูุงุช Traefik, ุณุฌูุงุช Odoo, ูุณุฌูุงุช PostgreSQL. ููุญุธุฑ ุงูููุงุฌููู ุชููุงุฆูุงู ููุฏุฉ 24 ุณุงุนุฉ ุนุจุฑ iptables.

ClamAV โ ูุถุงุฏ ุงูููุฑูุณุงุช
ูุนูู ุจูุธุงู ูุญุต ุฐูู ุจุฏูู daemon ูุชูููุฑ ุงูููุงุฑุฏ. ููุญุต ุงููุฌูุฏุงุช ุงูุญุณุงุณุฉ ููููุงู (/root, /home, /tmp, /var/tmp, /etc) ูุน ุงุณุชุซูุงุก /proc, /sys, /dev, ู /var/lib/docker. ุงููููุงุช ุงูููุตุงุจุฉ ุชูููู ุชููุงุฆูุงู ุฅูู /root/quarantine. ูุชู ุชุญุฏูุซ ูุงุนุฏุฉ ุจูุงูุงุช ุงูุชูููุนุงุช ููููุงู ูุชูุธูู ุงูุญุฌุฑ ุดูุฑูุงู.

SSH Hardening โ ุชูููุฉ SSH
ูุชู ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูุฅุนุฏุงุฏุงุช ุงูุฃุตููุฉ ูุจู ุฃู ุชุนุฏูู. ุงูุฅุนุฏุงุฏุงุช ุงูููุทุจููุฉ: ูููุฐ ูุฎุตุต (ุงูุชุฑุงุถู 2026), ูุตุงุฏูุฉ ุจุงูููุชุงุญ ุงูุนุงู ููุท (PasswordAuthentication no), ุชุนุทูู ุฏุฎูู Root (PermitRootLogin no), ุงูุณูุงุญ ููุณุชุฎุฏู ูุงุญุฏ ููุท (AllowUsers), ุชุนุทูู X11 Forwarding, ู ClientAlive ูู 5 ุฏูุงุฆู ุจุญุฏ ุฃูุตู 3 ูุญุงููุงุช.

Tailscale VPN
ูุนูู ูุญุงููุฉ Docker ูุน network_mode: host ูุตูุงุญูุงุช NET_ADMIN ู NET_RAW ูููุตูู ุงููุงูู ููุดุจูุฉ. ูููุดุฆ ุดุจูุฉ Mesh VPN ุชููุงุฆูุฉ ุจุฏูู ุฅุนุฏุงุฏ ูุนูุฏุ ููุง ูุชูุญ ุงููุตูู ุงูุขูู ููุณูุฑูุฑ ุนู ุจูุนุฏ ุนุจุฑ ุดุจูุฉ Tailscale ุงูุฎุงุตุฉ.

Cloudflare Tunnel (ุงุฎุชูุงุฑู)
ุฅุฐุง ุชู ุชูููุฑ CLOUDFLARE_TUNNEL_TOKENุ ูุชู ุชุซุจูุช cloudflared ูุฅูุดุงุก ุฎุฏูุฉ systemd ุชุนูู ุชููุงุฆูุงู. ูููููุฑ ูููุงู ุขููุงู ุจูู ุงูุณูุฑูุฑ ู Cloudflare ุจุฏูู ุงูุญุงุฌุฉ ููุชุญ ููุงูุฐ ุฅุถุงููุฉ.

ุชุญุณููุงุช ุงููุธุงู
ูุชู ุชุทุจูู ุชุญุณููุงุช Kernel ุนุจุฑ /etc/sysctl.d/99-server-boilerplate.conf ุชุดูู: ุชูุนูู IP Forwarding (ูู Docker), ุชูููุฏ kptr_restrict ู ptrace_scope ููุฃูุงู, ุฑูุน somaxconn ุฅูู 4096, ุชูุนูู fq_codel ูู qdisc ุงูุชุฑุงุถู, ู vm.max_map_count ูู 1M. ูููุดุฃ ููู Swap ุจุญุฌู 4GB ูุน swappiness=60. ุงูุชุญุฏูุซุงุช ุงูุฃูููุฉ ุงูุชููุงุฆูุฉ ูููุนููุฉ ุนุจุฑ unattended-upgrades.

๐ ููุงุฑุฏ ุงูุญุงููุงุช
ููุญุณููุฉ ูุณูุฑูุฑ 2 vCPU / 8GB RAM:

ุงูุญุงููุฉ	ุญุฏ CPU	ุญุฏ ุงูุฐุงูุฑุฉ	ุงูุฐุงูุฑุฉ ุงููุญุฌูุฒุฉ
Traefik	0.5	256 MB	128 MB
Portainer	0.5	256 MB	64 MB
Glances	โ	1 GB	128 MB
n8n	1.0	1.2 GB	512 MB
Redis (n8n)	0.2	256 MB	64 MB
Evolution API	0.5	512 MB	256 MB
PostgreSQL (Evolution)	0.5	512 MB	256 MB
Redis (Evolution)	0.2	256 MB	64 MB
Odoo 16	1.5	2.5 GB	1 GB
PostgreSQL (Odoo)	1.0	1.5 GB	1 GB
Next.js	0.8	1 GB	256 MB
Redis (Odoo Cache)	0.2	256 MB	64 MB
Tailscale	0.1	128 MB	64 MB
ููุงุญุธุฉ: ุฌููุน ุงูุญุงููุงุช ุชุณุชุฎุฏู json-file logging ูุน ุญุฏ 10MB ร 3 ูููุงุช ูููุน ุงูุชูุงุก ุงููุฑุต.

โฐ ุงูููุงู ุงููุฌุฏููุฉ (Cron Jobs)
ุงูุชูููุช	ุงููููุฉ	ุงููุตู
ูู ุฏูููุชูู	monitor_resources.sh	ูุฑุงูุจุฉ CPU/RAM/Disk ูุน ุชูุจููุงุช ุนูุฏ ุชุฌุงูุฒ 85%
ููููุงู 3:00 ุต	find /root/quarantine -mtime +30 -delete	ุชูุธูู ุงูุญุฌุฑ (ูููุงุช ุฃูุฏู ูู 30 ููู)
ููููุงู 4:00 ุต	freshclam --quiet	ุชุญุฏูุซ ูุงุนุฏุฉ ุจูุงูุงุช ููุฑูุณุงุช ClamAV
ููููุงู 5:00 ุต	smart_clamscan.sh	ูุญุต ุฐูู ูููุฌูุฏุงุช ุงูุญุณุงุณุฉ
โ ูุง ุจุนุฏ ุงูุชุซุจูุช
ุงูุชุญูู ูู ุญุงูุฉ ุงูุฎุฏูุงุช
# ุนุฑุถ ุฌููุน ุงูุญุงููุงุช ุงูุนุงููุฉ
docker ps

# ุนุฑุถ ุณุฌูุงุช ุฌููุน ุงูุฎุฏูุงุช
docker compose -f my-stack/docker-compose.yml logs -f

# ุนุฑุถ ุณุฌูุงุช ุฎุฏูุฉ ูุญุฏุฏุฉ
docker compose -f my-stack/docker-compose.yml logs -f n8n
ุงูุชุญูู ูู ุญุงูุฉ ุงูุฃูุงู
# ุฌุฏุงุฑ ุงูุญูุงูุฉ
sudo ufw status

# ุนูููุงุช ุงูุญุธุฑ ุงููุดุทุฉ ูู CrowdSec
sudo cscli decisions list

# ุชูุจููุงุช CrowdSec
sudo cscli alerts list
ุญุงูุฉ Tailscale
docker exec tailscale tailscale status
ุงูุฑูุงุจุท ุจุนุฏ ุงููุดุฑ
n8n:        https://domain.com
Odoo:       https://odoo.domain.com
Evolution:  https://evo.domain.com
Next.js:    https://next.domain.com
Portainer:  https://portainer.domain.com
Monitor:    https://monitor.domain.com
๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
ุงูุฎุฏูุงุช ูุง ุชุนูู ุจุนุฏ ุงูุชุซุจูุช
# ุชุญูู ูู ุญุงูุฉ ุงูุญุงููุงุช
docker ps -a

# ุฃุนุฏ ุชุดุบูู ุงูุญุฒูุฉ
cd my-stack && docker compose down && docker compose up -d

# ุชุญูู ูู ุณุฌูุงุช ุงูุฃุฎุทุงุก
docker compose -f my-stack/docker-compose.yml logs --tail=50
ุดูุงุฏุงุช SSL ูุง ุชุตุฏุฑ
# ุชุญูู ูู ุณุฌูุงุช Traefik
docker logs traefik_gateway --tail=100

# ุชุฃูุฏ ุฃู ุงูููุงูุฐ 80 ู 443 ููุชูุญุฉ
sudo ufw status | grep -E "80|443"

# ุชุฃูุฏ ุฃู DNS ููุดูุฑ ููุณูุฑูุฑ
dig +short domain.com
CrowdSec ูุง ูุนูู
# ุชุญูู ูู ุงูุญุงูุฉ
cscli version
cscli bouncers list

# ุฃุนุฏ ุชุดุบูู ุงูุฎุฏูุฉ
systemctl restart crowdsec
systemctl restart crowdsec-firewall-bouncer
Docker ูุง ูุนูู
systemctl status docker
journalctl -u docker --no-pager -n 50

# ุฅุนุงุฏุฉ ุงูุชุดุบูู
systemctl restart docker
ClamAV โ ุงูุชุญุฏูุซ ูุดู
# ุชุญุฏูุซ ูุฏูู
freshclam --verbose

# ุชุญูู ูู ุงูุณุฌู
cat /var/log/clamav/smart_scan.log
ูุง ุฃุณุชุทูุน ุงููุตูู ุนุจุฑ SSH
# ุชุฃูุฏ ูู ุงููููุฐ ุงูุตุญูุญ (ุงูุงูุชุฑุงุถู 2026)
ssh -p 2026 username@server-ip

# ุฅุฐุง ููุฏุช ุงููุตูู โ ุงุณุชุฎุฏู ูููุณูู VNC ูู ูุฒูุฏ ุงูุงุณุชุถุงูุฉ
# ุซู ุชุญูู ูู ุฅุนุฏุงุฏุงุช SSH:
cat /etc/ssh/sshd_config | grep -E "Port|AllowUsers"
sudo ufw status | grep SSH
Tailscale ูุง ูุชุตู
# ุชุญูู ูู ุงูุณุฌูุงุช
docker logs tailscale

# ุชุญูู ูู ุงูุญุงูุฉ
docker exec tailscale tailscale status

# ุฃุนุฏ ุงูุชุดุบูู
cd tailscale-stack && docker compose down && docker compose up -d
ูุฑุงูุจุฉ ุงูููุงุฑุฏ
# ุนุฑุถ ุณุฌู ุงููุฑุงูุจุฉ
tail -50 /var/log/resource_monitor.log

# ุนุฑุถ ุงูุชูุจููุงุช ููุท
grep "ALERT" /var/log/resource_monitor.log
๐ ููุงุญุธุงุช ุฃูููุฉ
ุชุญุฐูุฑ: ูุง ุชูุดุบูู ูุฐุง ุงูุณูุฑุจุช ุนูู ุณูุฑูุฑ ุฅูุชุงุฌ ุจุฏูู ุงุฎุชุจุงุฑู ุฃููุงู ุนูู ุจูุฆุฉ ุชุฌุฑูุจูุฉ.

ุชุฃูุฏ ูู ูุฌูุฏ ููุชุงุญ SSH ุนุงู ููุถุงู ูููุณุชุฎุฏู ูุจู ุงูุชุดุบูู โ ุงูุณูุฑุจุช ููุนุทูู ุชุณุฌูู ุงูุฏุฎูู ุจูููุฉ ุงููุฑูุฑ
ุงุญุชูุธ ุจุทุฑููุฉ ูุตูู ุจุฏููุฉ (VNC / KVM / Console) ุฏุงุฆูุงู
ุบููุฑ SSH_PORT ูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ 2026 ุฅุฐุง ููุช ุชููุถูู
ูุง ุชูุดุงุฑู ููู .env ุฃุจุฏุงู โ ูุญุชูู ุนูู ูููุงุช ุงููุฑูุฑ ูุงูููุงุชูุญ
ุฃุถูู ุฅูู .gitignore (ุงูููู .env.example ููุท ููุฑูุน ูููุณุชูุฏุน)
ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ ูููููุฏุฉ ุนุจุฑ openssl rand
ุฑุงุฌุน ููุงุนุฏ UFW ุจุนุฏ ุงูุชุซุจูุช: sudo ufw status numbered
ุฑุงูุจ ุชูุจููุงุช CrowdSec ุจุงูุชุธุงู: sudo cscli alerts list
ุชุญูู ูู ุณุฌู ุงูุญุฌุฑ: ls -la /root/quarantine/
๐ค ุงููุณุงููุฉ
ุงููุณุงููุงุช ููุฑุญูุจ ุจูุง! ุฅุฐุง ูุฌุฏุช ูุดููุฉ ุฃู ูุฏูู ุงูุชุฑุงุญ:

ุงูุชุญ Issue ููุตู ุงููุดููุฉ ุฃู ุงูุงูุชุฑุงุญ
ุฃูุดุฆ Fork ูู ุงููุดุฑูุน
ุฃูุดุฆ ูุฑุน ุฌุฏูุฏ: git checkout -b feature/my-feature
ูุฏูู ุงูุชุนุฏููุงุช: git commit -m "Add my feature"
ุงุฏูุน ุงููุฑุน: git push origin feature/my-feature
ุงูุชุญ Pull Request
๐ ุงูุฑุฎุตุฉ
ูุฐุง ุงููุดุฑูุน ูุฑุฎูุต ุชุญุช ุฑุฎุตุฉ MIT.

ุตููู ุจุนูุงูุฉ ููุดุฑ ูุญูุงูุฉ ุณูุฑูุฑุงุชู ุจุฃูุฑ ูุงุญุฏ

ุฅุฐุง ุฃุนุฌุจู ุงููุดุฑูุนุ ูุง ุชูุณู โญ

```
